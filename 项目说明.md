# Store é™æ€èµ„æºæœåŠ¡æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

aip.so æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ AI æ‘„å½±å¹³å°ï¼Œä¸ºç”¨æˆ·æä¾› Headshot AIã€Group Photo AIã€Fashion Shot AI ç­‰ä¸åŒç»†åˆ†é¢†åŸŸçš„äº§å“ï¼Œæ»¡è¶³ç”¨æˆ·åœ¨è¯¥é¢†åŸŸçš„ä¸“ä¸šæ‘„å½±éœ€æ±‚ã€‚

æœ¬é¡¹ç›®æ˜¯ä» aip.so çš„åç«¯æœåŠ¡çš„ `static` ç›®å½•åˆ†ç¦»å‡ºæ¥çš„ï¼Œä½œä¸ºç‹¬ç«‹çš„é™æ€èµ„æºæœåŠ¡éƒ¨ç½²ï¼Œæä¾›ç»™å¼€å‘ç¯å¢ƒï¼Œä»¥åŠå°†èµ„æºæ–‡ä»¶ä»è¿™é‡Œä¸Šä¼ åˆ° Cloudflareï¼Œæä¾›ç»™ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚


## ğŸ“ ç›®å½•ç»“æ„

### å®Œæ•´ç»“æ„

```
static/
â”œâ”€â”€ {product-slug}/              # äº§å“ç›®å½•ï¼ˆå¦‚ headshot-ai, group-photo-aiï¼‰
â”‚   â”œâ”€â”€ images/                  # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”œâ”€â”€ demo/               # æ¼”ç¤ºå›¾ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ home/           # é¦–é¡µå±•ç¤ºå›¾ç‰‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ {category}/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ *.webp
â”‚   â”‚   â”‚   â”œâ”€â”€ faces/          # æ¼”ç¤ºäººè„¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ {gender}/  # Female, Male
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ {ethnicity}/  # White, Black, Asian, etc.
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ *.webp
â”‚   â”‚   â”‚   â””â”€â”€ options/        # é€‰é¡¹å›¾ç‰‡
â”‚   â”‚   â”‚       â”œâ”€â”€ backdrops/  # èƒŒæ™¯å›¾ç‰‡
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ {category}/
â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ {image-name}/
â”‚   â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ blur-0.webp   # åŸå§‹å›¾ç‰‡
â”‚   â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ blur-5.webp   # è½»åº¦æ¨¡ç³Š
â”‚   â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ blur-10.webp  # ä¸­åº¦æ¨¡ç³Š
â”‚   â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ blur-15.webp  # é‡åº¦æ¨¡ç³Š
â”‚   â”‚   â”‚       â”œâ”€â”€ poses/      # å§¿åŠ¿å›¾ç‰‡
â”‚   â”‚   â”‚       â”œâ”€â”€ outfits/    # æœè£…å›¾ç‰‡
â”‚   â”‚   â”‚       â””â”€â”€ hairstyles/ # å‘å‹å›¾ç‰‡
â”‚   â”‚   â””â”€â”€ {width}/            # ä¸åŒå°ºå¯¸çš„å›¾ç‰‡ï¼ˆå¦‚ demo, 400, 800ï¼‰
â”‚   â”‚       â”œâ”€â”€ home/
â”‚   â”‚       â””â”€â”€ faces/
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

### ç¤ºä¾‹ï¼šheadshot-ai äº§å“

```
static/headshot-ai/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ demo/
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â”œâ”€â”€ Business/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ business-1.webp
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ business-2.webp
â”‚   â”‚   â”‚   â””â”€â”€ Casual/
â”‚   â”‚   â”‚       â””â”€â”€ casual-1.webp
â”‚   â”‚   â”œâ”€â”€ faces/
â”‚   â”‚   â”‚   â”œâ”€â”€ Female/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ White/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ face-1.webp
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ face-2.webp
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Asian/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ face-1.webp
â”‚   â”‚   â”‚   â””â”€â”€ Male/
â”‚   â”‚   â”‚       â””â”€â”€ White/
â”‚   â”‚   â”‚           â””â”€â”€ face-1.webp
â”‚   â”‚   â””â”€â”€ options/
â”‚   â”‚       â”œâ”€â”€ backdrops/
â”‚   â”‚       â”‚   â”œâ”€â”€ 1@Studio/
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ Dark-Gradients/
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ blur-0.webp
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ blur-5.webp
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ blur-10.webp
â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ blur-15.webp
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ Light-Textures/
â”‚   â”‚       â”‚   â”‚       â””â”€â”€ blur-*.webp
â”‚   â”‚       â”‚   â””â”€â”€ 2@Outdoor/
â”‚   â”‚       â”‚       â””â”€â”€ Beach/
â”‚   â”‚       â”‚           â””â”€â”€ blur-*.webp
â”‚   â”‚       â”œâ”€â”€ poses/
â”‚   â”‚       â”œâ”€â”€ outfits/
â”‚   â”‚       â””â”€â”€ hairstyles/
â”‚   â””â”€â”€ 400/                     # 400pxå®½åº¦çš„ç¼©ç•¥å›¾
â”‚       â”œâ”€â”€ home/
â”‚       â””â”€â”€ faces/

```

## å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®

```javascript
// é…ç½®é™æ€èµ„æºåŸŸå
const STATIC_DOMAIN = 'https://static.aip.so';
const PRODUCT = 'headshot-ai';

// ç›´æ¥è®¿é—®å›¾ç‰‡
const imageUrl = `${STATIC_DOMAIN}/${PRODUCT}/images/options/backdrops/1@Studio/Dark-Gradients/blur-0.webp`;

<img src={imageUrl} alt="Backdrop" />
```

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### ç”Ÿäº§ç¯å¢ƒï¼šCloudflare Pagesï¼ˆæ¨èï¼‰

å°† static é™æ€èµ„æºéƒ¨ç½²åˆ° Cloudflare Pagesï¼š

- âœ… æ— é™å¸¦å®½ï¼Œé›¶æˆæœ¬
- âœ… å…¨çƒ 300+ CDN èŠ‚ç‚¹
- âœ… è‡ªåŠ¨ HTTPS
- âœ… Git è‡ªåŠ¨éƒ¨ç½²

è¯¦è§ï¼š[Store Cloudflare éƒ¨ç½²æŒ‡å—](./__docs/Static_Cloudflareéƒ¨ç½²æŒ‡å—.md)

### å¼€å‘ç¯å¢ƒï¼šPython é™æ€æœåŠ¡å™¨

æœ€ç®€å•çš„å¼€å‘æ–¹å¼ï¼Œæ— éœ€é…ç½® Nginxï¼š

```bash
# å¯åŠ¨æœåŠ¡å™¨
python3 dev_server.py

# è®¿é—®æµ‹è¯•é¡µé¢
open http://localhost:8080/test.html

# æˆ–ç›´æ¥è®¿é—®å›¾ç‰‡
open http://localhost:8080/headshot-ai/images/home/Studio/Light/15.webp
```

**ç‰¹æ€§**ï¼š
- âœ… ä¸€é”®å¯åŠ¨ï¼Œæ— éœ€é…ç½®
- âœ… æ”¯æŒå¤šäº§å“æ¶æ„ï¼ˆè·¯å¾„æˆ–å­åŸŸåï¼‰
- âœ… è‡ªåŠ¨ CORS æ”¯æŒ
- âœ… ç›®å½•æµè§ˆåŠŸèƒ½
- âœ… æ¸…æ™°çš„æ—¥å¿—è¾“å‡º

è¯¦è§ï¼š[å¼€å‘æœåŠ¡å™¨æ–‡æ¡£](./DEV_SERVER.md)

### 2. æµ‹è¯•ç¯å¢ƒï¼šNginxé™æ€æœåŠ¡

```nginx
server {
    listen 80;
    server_name static.aip.so;

    # é™æ€èµ„æºæ ¹ç›®å½•
    root /var/www/static;

    # å¯ç”¨gzipå‹ç¼©
    gzip on;
    gzip_types image/webp image/jpeg image/png;

    # ç¼“å­˜é…ç½®
    location ~* \.(webp|jpg|jpeg|png|gif)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # CORSé…ç½®ï¼ˆå¦‚æœéœ€è¦è·¨åŸŸè®¿é—®ï¼‰
    add_header Access-Control-Allow-Origin "*";
    add_header Access-Control-Allow-Methods "GET, OPTIONS";

    # äº§å“å›¾ç‰‡
    location ~ ^/([^/]+)/images/ {
        try_files $uri $uri/ =404;
    }

    # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ï¼ˆéœ€è¦è®¤è¯ï¼‰
    location ~ ^/([^/]+)/upload/ {
        # æ·»åŠ è®¤è¯é€»è¾‘
        auth_request /auth;
        try_files $uri $uri/ =404;
    }
}
```

### 3. ç”Ÿäº§ç¯å¢ƒï¼šCDN + å¯¹è±¡å­˜å‚¨

ä½¿ç”¨ Cloudflare



## ğŸ“ æ–‡ä»¶å‘½åè§„èŒƒ

### å›¾ç‰‡æ–‡ä»¶

- **æ ¼å¼**ï¼šä¼˜å…ˆä½¿ç”¨ `.webp`ï¼Œå…¶æ¬¡ `.jpg`ã€`.png`
- **å‘½å**ï¼šå°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ï¼Œå¦‚ `dark-gradient.webp`
- **é¿å…**ï¼šç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦ã€ä¸­æ–‡

### ç›®å½•å‘½å

- **åˆ†ç±»ç›®å½•**ï¼šä½¿ç”¨ `@` å‰ç¼€è¡¨ç¤ºæ’åºï¼Œå¦‚ `1@Studio`ã€`2@Outdoor`
- **å­åˆ†ç±»**ï¼šä½¿ç”¨è¿å­—ç¬¦ï¼Œå¦‚ `Dark-Gradients`ã€`Light-Textures`

### æ¨¡ç³Šå›¾ç‰‡

- **å‘½åæ ¼å¼**ï¼š`blur-{level}.webp`
- **çº§åˆ«**ï¼š`0`ï¼ˆåŸå§‹ï¼‰ã€`5`ï¼ˆè½»åº¦ï¼‰ã€`10`ï¼ˆä¸­åº¦ï¼‰ã€`15`ï¼ˆé‡åº¦ï¼‰
- **ä½ç½®**ï¼šåœ¨å›¾ç‰‡åç§°çš„å­æ–‡ä»¶å¤¹ä¸­


## ğŸ”§ ç»´æŠ¤æŒ‡å—

### æ·»åŠ æ–°äº§å“

1. åˆ›å»ºäº§å“ç›®å½•ï¼š
```bash
mkdir -p static/new-product-ai/images/{home,faces,options}
```

2. æ·»åŠ æ¼”ç¤ºå›¾ç‰‡ï¼š
```bash
# é¦–é¡µå›¾ç‰‡
static/new-product-ai/images/home/Category1/image1.webp

# äººè„¸å›¾ç‰‡
static/new-product-ai/images/demo-faces/Female/White/face1.webp

# é€‰é¡¹å›¾ç‰‡
static/new-product-ai/images/options/backdrops/1@Studio/...
```

3. åœ¨åç«¯é…ç½®ä¸­å¯ç”¨äº§å“ï¼ˆ`server/settings.py`ï¼‰

### æ·»åŠ æ–°èƒŒæ™¯å›¾ç‰‡

ä½¿ç”¨æä¾›çš„å·¥å…·ç”Ÿæˆæ¨¡ç³Šç‰ˆæœ¬ï¼š

```bash
# 1. å°†åŸå§‹å›¾ç‰‡æ”¾å…¥inputç›®å½•
mkdir -p tools/create-backdrops-blur-image/input/1@Studio
cp original-image.webp tools/create-backdrops-blur-image/input/1@Studio/

# 2. è¿è¡Œå·¥å…·
cd tools/create-backdrops-blur-image
python main.py

# 3. å¤åˆ¶ç”Ÿæˆçš„æ–‡ä»¶åˆ°store
cp -r input/1@Studio/* ../../static/headshot-ai/images/options/backdrops/1@Studio/

```

è¯¦è§ï¼š[èƒŒæ™¯å›¾ç‰‡æ¨¡ç³Šç‰ˆæœ¬ç”Ÿæˆå·¥å…·](../../tools/create-backdrops-blur-image/README.md)

### æ›´æ–°å›¾ç‰‡

1. **æ›¿æ¢å›¾ç‰‡**ï¼šç›´æ¥è¦†ç›–åŸæ–‡ä»¶
2. **æ¸…é™¤ç¼“å­˜**ï¼š
   - CDNï¼šåœ¨CDNæ§åˆ¶å°åˆ·æ–°ç¼“å­˜
   - Nginxï¼š`nginx -s reload`
   - æµè§ˆå™¨ï¼šæ·»åŠ ç‰ˆæœ¬å· `?v=2`

### åˆ é™¤å›¾ç‰‡

1. åˆ é™¤æ–‡ä»¶
2. æ¸…é™¤CDNç¼“å­˜
3. æ£€æŸ¥æ˜¯å¦æœ‰APIå¼•ç”¨è¯¥å›¾ç‰‡

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å›¾ç‰‡ä¼˜åŒ–

```bash
# ä½¿ç”¨cwebpå‹ç¼©å›¾ç‰‡
cwebp -q 80 input.jpg -o output.webp

# æ‰¹é‡è½¬æ¢
for img in *.jpg; do
    cwebp -q 80 "$img" -o "${img%.jpg}.webp"
done
```

### ç”Ÿæˆå¤šå°ºå¯¸

```bash
# ä½¿ç”¨ImageMagickç”Ÿæˆç¼©ç•¥å›¾
convert input.webp -resize 400x400 output-400.webp
convert input.webp -resize 800x800 output-800.webp
```

### ç¼“å­˜ç­–ç•¥

| èµ„æºç±»å‹ | ç¼“å­˜æ—¶é—´ | è¯´æ˜ |
|---------|---------|------|
| æ¼”ç¤ºå›¾ç‰‡ | 30å¤© | å¾ˆå°‘å˜æ›´ |
| ç”¨æˆ·ä¸Šä¼  | 7å¤© | å¯èƒ½æ›´æ–° |
| æ¨¡ç³Šå›¾ç‰‡ | 90å¤© | å‡ ä¹ä¸å˜ |

## ğŸ” å®‰å…¨è€ƒè™‘

- âœ… å…¬å¼€è®¿é—®
- âœ… é˜²ç›—é“¾
- âœ… é™åˆ¶è¯·æ±‚é¢‘ç‡


## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### ç›‘æ§æŒ‡æ ‡

- è¯·æ±‚é‡ï¼ˆQPSï¼‰
- å“åº”æ—¶é—´
- ç¼“å­˜å‘½ä¸­ç‡
- å¸¦å®½ä½¿ç”¨
- é”™è¯¯ç‡ï¼ˆ4xx, 5xxï¼‰

## ğŸ—‚ï¸ æ–‡ä»¶åˆ—è¡¨å·¥å…·

æœ¬é¡¹ç›®æä¾›äº†æ–‡ä»¶åˆ—è¡¨ç”Ÿæˆå’Œè§£æå·¥å…·ï¼Œç”¨äºå¿«é€Ÿç®¡ç†å’ŒæŸ¥è¯¢é™æ€èµ„æºã€‚

### å¿«é€Ÿå¼€å§‹

```bash
# ç”Ÿæˆæ–‡ä»¶åˆ—è¡¨
./generate-filelist.sh headshot-ai
```

### è‡ªåŠ¨ç›‘è§†å’ŒåŒæ­¥

å¯åŠ¨æ–‡ä»¶ç›‘è§†å·¥å…·ï¼Œè‡ªåŠ¨æ£€æµ‹ static/ ç›®å½•çš„å˜åŒ–å¹¶åŒæ­¥åˆ° server ç«¯ï¼š

```bash
# å®‰è£…ä¾èµ–
pip3 install watchdog

# å¯åŠ¨ç›‘è§†
./start-watch.sh
```

è¯¦è§ï¼š[æ–‡ä»¶ç›‘è§†å’ŒåŒæ­¥å·¥å…·](./tools/sync-static-files/README.md)

### ç”Ÿæˆçš„æ–‡ä»¶

```
tools/filelist-generator/headshot-ai/files.txt
```

æ–‡ä»¶æ ¼å¼ï¼šæ¯è¡Œä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼ŒæŒ‰å­—å…¸åºæ’åº
```
images/home/City/city-1.webp
images/home/City/city-2.webp
images/options/backdrops/1@Studio/Dark-Gradients/blur-0.webp
```

### Server ç«¯é›†æˆ

```python
from tools.filelist_parser import FileListParser

# åˆå§‹åŒ–è§£æå™¨
parser = FileListParser('tools/filelist-generator/headshot-ai/files.txt')

# è·å–åˆ†é¡µæ•°æ®
page_data = parser.get_page(page=1, page_size=20)

# æŒ‰åˆ†ç±»è·å–
home_files = parser.get_files_by_category('home')

# æœç´¢æ–‡ä»¶
results = parser.search('blur')
```

è¯¦è§ï¼š[æ–‡ä»¶åˆ—è¡¨å·¥å…·æŒ‡å—](./tools/FILELIST_GUIDE.md)

## ç›¸å…³æ–‡æ¡£

- [å¤šäº§å“æ¶æ„](./__docs/å¤šäº§å“æ¶æ„.md)
- [å¼€å‘æœåŠ¡å™¨æ–‡æ¡£](./DEV_SERVER.md)
- [æ–‡ä»¶åˆ—è¡¨å·¥å…·æŒ‡å—](./tools/FILELIST_GUIDE.md)
- [è·¯å¾„é…ç½®è¯´æ˜](./PATH_CONFIGURATION.md)
- [å®¢æˆ·ç«¯é›†æˆç¤ºä¾‹](./CLIENT_INTEGRATION_EXAMPLE.md)